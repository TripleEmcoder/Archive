\documentclass[12pt,a4paper,titlepage,twoside]{article}
\usepackage[T1]{fontenc}
\usepackage[cp1250]{inputenc}
\usepackage[english,polish]{babel}
\usepackage[T1]{polski}
\usepackage{times}
\usepackage{fancyhdr}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{slashbox}
\usepackage{sistyle}
\usepackage{amsfonts}
\usepackage{latexsym}
%\usepackage{notebook2e, latexsym}

\hypersetup
{
	bookmarksnumbered=true,
	colorlinks=true,
	linkcolor=blue,
	bookmarksopen=true,
	bookmarksopenlevel=2,
	pdfstartview={FitH}
}

\SIdecimalsign{,}

\setlength{\textheight}{24cm}
\setlength{\textwidth}{16cm}
\setlength{\footskip}{10mm}
\setlength{\oddsidemargin}{0mm}
\setlength{\evensidemargin}{0mm}
\setlength{\topmargin}{0mm}
\setlength{\headsep}{5mm}
\setlength{\headheight}{15.0pt}

\pagestyle{fancy}
\fancyhead{}
\fancyhead[LE,RO]{\textsf{\thepage}}
\fancyhead[RE,LO]{\textsf{tytu³}}
\fancyhead[CE,CO]{\ }
\fancyfoot[LE,RO]{\ }
\fancyfoot[RE,LO]{\ }
\fancyfoot[CE,CO]{\ }
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

\begin{titlepage}
\title{Przetwarzanie równoleg³e \\ tytu³}
\author{ Bartosz Kukawka (75911) \\ Marcin Miko³ajczak (75922) \\ Grupa I3A}
\end{titlepage}

\begin{document}

\maketitle

\tableofcontents

\newpage

\section{Sformu³owanie problemu}
Przedmiotem niniejszego sprawozdania jest analiza problemu przetwarzania równoleg³ego w oœmioprocesorowym systemie przetwarzania o topologii szeœcianu, który cechuje mo¿liwoœæ jednoczesnego wykonywania obliczeñ i przesy³ania danych przez ka¿dy z jego procesorów. Dodatkowo zak³ada siê, ¿e w chwili zerowej obliczeñ wszystkie dane potrzebne do ich wykonania znajduj¹ siê w jednym naro¿niku wspomnianego szeœcianu.

Analizowany system wraz z przyjêtymi oznaczeniami procesorów przedstawiaj¹ pogl¹dowo rysunki \ref{fig:cube} i \ref{fig:flat}. Procesor, który pocz¹tkowo dysponuje wszystkimi danymi, zosta³ oznaczony przez 0. Dalsza numeracja wynika z odleg³oœci od Ÿród³a danych. Poœród procesorów o równej odleg³oœci numeracja zosta³a przydzielona na podstawie rzutu z rysunku \ref{fig:cube} w kolejnoœci zgodnej z ruchem wskazówek zegara, poczynaj¹c od procesorów na górnej, tylnej krawêdzi szeœcianu.

\begin{figure}[h!]
\centering
\includegraphics[trim=0 15mm 0 15mm, clip]{cube}
\caption{Schemat analizowanego systemu przetwarzania}
\label{fig:cube}
\end{figure}

\begin{figure}[h!]
\centering
\includegraphics[trim=0 0 0 0, clip]{flat}
\caption{Schemat analizowanego systemu przetwarzania c.d.}
\label{fig:flat}
\end{figure}

\section{Model w œrodowisku Parastation}
Opisany wy¿ej system przetwarzania zosta³ zamodelowany w œrodowisku Parastation w sposób przedstawiony na rysunku \ref{fig:parastation}. Niewykorzystywane procesory nie otrzyma³y numeracji, a niewykorzystywane ³¹cza nie zosta³y uwzglêdnione na rysunku.

\begin{figure}[h!]
\centering
\includegraphics[trim=0 0 0 0, clip]{parastation}
\caption{Model systemu w œrodowisku Parastation}
\label{fig:parastation}
\end{figure}

\section{Analiza problemu}
Spoœród wielu mo¿liwych dróg dostarczenia danych do poszczególnych procesorów wybrane zosta³y te oznaczone na rysunku \ref{fig:parastation} strza³k¹ symbolizuj¹c¹ kierunek przekazywania danych.

Dane wejœciowe:
\begin{description}
\item[$A(j)$] -- szybkoœæ procesora j, 
\item[$C(j)$] -- szybkoœæ ³¹cza bezpoœrednio dochodz¹cego do procesora j,
\item[$S$] -- czas rozruchu,
\item[$V$] -- rozmiar danych,
\item[$k$] -- liczba faz komunikacji,
\item[$a(j,k)$] -- wielkoœæ paczki o numerze k przeznaczonej dla procesora j,
\item[$r(j,k)$] -- moment gotowoœci do wys³ania paczki k dla procesora j,
\item[$t(j,k)$] -- moment gotowoœci do obliczeñ paczki k dla procesora j.
\end{description}
Funkcje pomocnicze:
\begin{itemize}
\item czas przesy³ania danych do procesora j w fazie k
\begin{displaymath}
T_c(j,k) = \left\{ \begin{array}{ll}
0 & \textrm{dla $j=0$}\\
S + C(j) \, \sum_{i = 0}^{2 - \lfloor (j + 1)/3\rfloor} a(3\,i + j,k) & \textrm{dla $j>0$}
\end{array} \right.
\end{displaymath}
\item czas obliczania danych na procesorze j w fazie k
$$T_a(j,k) = A(j) \, a(j,k) $$
\end{itemize}
Funkcja celu:
\begin{quotation}
$$\textrm{min:} \; T$$
\end{quotation}
Ograniczenia:
\begin{itemize}
\item kolejna paczka nie mo¿e byæ wys³ana przed zakoñczeniem wysy³ania poprzedniej
$$r(j, k) + T_c(j,k) \leq r(j, k - 1) \qquad j = 1 \ldots 7, \; k = 1 \ldots m-1$$
\item paczka nie mo¿e byæ przes³ana do kolejnego procesora przed zakoñczeniem odbierania
$$r(j, k) + T_c(j,k) \leq r(j + 3, k) \qquad j = 1 \ldots 4, \; k = 0 \ldots m-1$$
\item pierwsze paczki dla procesorów 1..3 s¹ dostêpne w chwili $t = 0$
$$r(j, m-1) = 0 \qquad j = 1 \ldots 3$$
\item nie mo¿na liczyæ przed zakoñczeniem transmisji
$$r(j, k) + T_c(j,k) \leq t(j, k) \qquad j = 0 \ldots 7, \; k = 0 \ldots m-1$$
\item kolejne paczki musz¹ byæ liczone sekwencyjnie
$$t(j, k) + T_a(j,k) \leq t(j, k-1) \qquad j = 0 \ldots 7, \; k = 1 \ldots m-1$$
\item obliczanie ostatniej paczki musi zakoñczyæ siê przed koñcem przetwarzania
$$t(j, 0) + T_a(j,0) \leq T \qquad j = 0 \ldots 7$$
\item suma wszystkich paczek musi byæ równa rozmiarowi danych wejœciowych
$$ \sum_{j = 0}^{7} \sum_{k = 0}^{m-1} a(j,k) = V$$
\end{itemize}

\section{Rozwi¹zanie przyk³adowego problemu}

Dane:
S = 11;
A[0] = A[2] = A[3] = A[5] = 16;
A[1] = A[4] = A[6] = A[7] = 20;
C[1] = C[6] = 2.2;
C[2] = C[3] = C[4] = C[5] = C[7] = 4.4;
V = 10000;

\begin{figure}[h!]
\centering
\includegraphics[width=\textwidth, trim=0 0 0 0, clip]{wykres1}
\caption{Wykres Gantta dla liczby paczek $m=1$}
\label{fig:wykres1}
\end{figure}

\begin{figure}[h!]
\centering
\includegraphics[width=\textwidth, trim=0 0 0 0, clip]{wykres3}
\caption{Wykres Gantta dla liczby paczek $m=3$}
\label{fig:wykres3}
\end{figure}

\begin{figure}[h!]
\centering
\includegraphics[width=\textwidth, trim=0 0 0 0, clip]{wykres5}
\caption{Wykres Gantta dla liczby paczek $m=5$}
\label{fig:wykres5}
\end{figure}

Wykres czasu przetwarzania w zale¿noœci od liczby faz:
\begin{figure}[h!]
\centering
\includegraphics[width=\textwidth, trim=0 0 0 0, clip]{wykres}
\caption{Wykres czasu przetwarzania}
\label{fig:wykres}
\end{figure}

Minimalny czas przetwarzania w systemie Parastation, przy za³o¿eniu ¿e w chwili $t=0$ dane znajduj¹ siê ju¿ w procesorach wynosi:

$$T_{min} = V \; \frac{1}{\frac{4}{A_1} + \frac{4}{A_2}}$$

gdzie $A_1$ i $A_2$ to szybkoœci procesorów.

Dla przyjêtych danych czas ten wynosi $T_{min} \approx 22222$. Na wykresie \ref{fig:wykres} widaæ, ¿e wraz ze wzrostem iloœci faz czas przetwarzania zbli¿a siê asymptotycznie do tej granicy.

\end{document}
